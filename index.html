<!DOCTYPE HTML>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <title>Les 8 voyageurs</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <noscript><link rel="stylesheet" href="assets/css/noscript.css"></noscript>
    <style>
        #header .content .inner img { width: 70%; height: auto; border-radius: 20px; }
        #header .logo span { font-size: 2em; font-weight: bold; }
        .play-button-container { display: flex; justify-content: center; align-items: center; margin-top: 10px; gap: 10px; }
        .control-button { background-color: transparent; border: none; cursor: pointer; }
        .control-button svg { width: 2em; height: auto; }
        .personnages img { width: 20%; height: 20%; display: block; margin: 0 auto; }
        .audio-controls { display: flex; align-items: center; gap: 10px; }
        .time { font-size: 1em; }
        .slider { -webkit-appearance: none; width: 100%; height: 5px; background: #ddd; outline: none; opacity: 0.7; transition: opacity .2s; }
        .slider:hover { opacity: 1; }
        .slider::-webkit-slider-thumb, .slider::-moz-range-thumb { width: 15px; height: 15px; background: red; cursor: pointer; border-radius: 50%; }
    </style>
</head>
<body class="is-preload">
    <div id="wrapper">
        <header id="header">
            <div class="logo"><span>8</span></div>
            <div class="content">
                <div class="inner">
                    <h1>Les 8 Voyageurs</h1>
                    <img src="images/Main.webp" alt="">
                    <p>Un livre pensé par Augustin Boué</p>
                </div>
            </div>
            <nav>
                <ul id="chapter-links"></ul>
            </nav>
        </header>
        <div id="main">
            <article id="perso">
                <h2 class="major">Les Personnages</h2>
                <ul>
                    <li class="personnages"><p>Aleksos</p><img src="images/Alex.webp" alt="Aleksos"></li>
                    <li class="personnages"><p>Natan</p><img src="images/Nathan.webp" alt="Natan"></li>
                    <li class="personnages"><p>Augebert</p><img src="images/Augustin.webp" alt="Augebert"></li>
                    <li class="personnages"><p>Tomaire</p><img src="images/Thomas.webp" alt="Tomaire"></li>
                    <li class="personnages"><p>Godfroy</p><img src="images/Gauthier.webp" alt="Godfroy"></li>
                    <li class="personnages"><p>Aldaric</p><img src="images/Adri.webp" alt="Aldaric"></li>
                    <li class="personnages"><p>Roban</p><img src="images/Robinson.webp" alt="Roban"></li>
                    <li class="personnages"><p>Benyamin</p><img src="images/Benjamin.webp" alt="Benyamin"></li>
                </ul>
            </article>
        </div>
        <footer id="footer">
            <p class="copyright">&copy;Les 8 Voyageurs 2024.</p>
        </footer>
    </div>
    <div id="bg"></div>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/audio-control.js"></script>
    <script>
        const chapters = [
            { id: "ch1", title: "Chapitre 1", description: "La Chasse", imgSrc: "images/C1i.webp", audioSrc: "Voix/C1.m4a" },
            { id: "ch2", title: "Chapitre 2", description: "L'étrange Marchand", imgSrc: "images/C2i.webp", audioSrc: "Voix/C2.m4a" },
            { id: "ch3", title: "Chapitre 3", description: "Le Pacte", imgSrc: "images/C3i.webp", audioSrc: "Voix/C3.mp3" },
            { id: "ch4", title: "Chapitre 4", description: "Le Départ", imgSrc: "images/C4i.webp", audioSrc: "Voix/C4.mp3" },
            { id: "ch5", title: "Chapitre 5", description: "La Rencontre Inattendue", imgSrc: "images/C5i.webp", audioSrc: "Voix/C5.mp3" },
            { id: "ch6", title: "Chapitre 6", description: "Les Murmures de la Forêt", imgSrc: "images/C6i.webp", audioSrc: "Voix/C6.m4a" },
            { id: "ch7", title: "Chapitre 7", description: "Le Dilemme de la Route", imgSrc: "images/C7i.webp", audioSrc: "Voix/C7.mp3" },
            { id: "ch8", title: "Chapitre 8", description: "Mayim’Bolor", imgSrc: "images/C8i.webp", audioSrc: "Voix/C8.mp3" },
            { id: "ch9", title: "Chapitre 9", description: "Les Echos de la Ville Noyée", imgSrc: "images/C9i.webp", audioSrc: "Voix/C9.mp3" },
            { id: "ch10", title: "Chapitre 10", description: "Frères de Baston", imgSrc: "images/C10i.webp", audioSrc: "Voix/C10.mp3" },
            { id: "ch11", title: "Chapitre 11", description: "Révélation et Décision", imgSrc: "images/C11i.webp", audioSrc: "Voix/C11.mp3" },
            { id: "ch12", title: "Chapitre 12", description: "La Nuit Porte Conseil", imgSrc: "images/C12i.webp", audioSrc: "Voix/C12.mp3" }
        ];

        const chapterLinks = document.getElementById('chapter-links');
        const mainContent = document.getElementById('main');

        chapters.forEach(chapter => {
            // Create nav link
            const link = document.createElement('li');
            link.innerHTML = `<a href="#${chapter.id}">${chapter.title}</a>`;
            chapterLinks.appendChild(link);

            // Create chapter article
            const article = document.createElement('article');
            article.id = chapter.id;
            article.innerHTML = `
                <h2 class="major">${chapter.title}</h2>
                <p>${chapter.description}</p>
                <img src="${chapter.imgSrc}" alt="">
                <audio id="audio${chapter.id}" src="${chapter.audioSrc}"></audio>
                <div class="audio-controls">
                    <span class="time" id="current-time${chapter.id}">0:00</span>
                    <input type="range" id="seek-bar${chapter.id}" class="slider" value="0">
                    <span class="time" id="duration${chapter.id}">0:00</span>
                </div>
                <div class="play-button-container">
                    <button class="control-button" onclick="skipTime('audio${chapter.id}', -10)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 19V5l-7 7 7 7zm0-7l7 7V5l-7 7z"/></svg></button>
                    <button class="control-button" onclick="togglePlayPause('audio${chapter.id}', this)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><g class="play-icon"><path d="M8 5v14l11-7z"/></g><g class="pause-icon" style="display:none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></g></svg></button>
                    <button class="control-button" onclick="skipTime('audio${chapter.id}', 10)"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M5 5v14l7-7-7-7zm7 0v14l7-7-7-7z"/></svg></button>
                </div>`;
            mainContent.appendChild(article);
        });

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('audio').forEach(audio => {
                const audioId = audio.id.replace('audio', '');
                const seekBar = document.getElementById(`seek-bar${audioId}`);
                const currentTimeDisplay = document.getElementById(`current-time${audioId}`);
                const durationDisplay = document.getElementById(`duration${audioId}`);
                audio.addEventListener('loadedmetadata', () => { durationDisplay.textContent = formatTime(audio.duration); seekBar.max = audio.duration; });
                audio.addEventListener('timeupdate', () => { currentTimeDisplay.textContent = formatTime(audio.currentTime); seekBar.value = audio.currentTime; });
                seekBar.addEventListener('input', () => { audio.currentTime = seekBar.value; });
            });
        });

        const togglePlayPause = (audioId, button) => {
            const audio = document.getElementById(audioId);
            const playIcon = button.querySelector('.play-icon');
            const pauseIcon = button.querySelector('.pause-icon');
            if (audio.paused) { audio.play(); playIcon.style.display = 'none'; pauseIcon.style.display = 'block'; } else { audio.pause(); playIcon.style.display = 'block'; pauseIcon.style.display = 'none'; }
        };

        const skipTime = (audioId, time) => { document.getElementById(audioId).currentTime += time; };

        const formatTime = seconds => `${Math.floor(seconds / 60)}:${Math.floor(seconds % 60).toString().padStart(2, '0')}`;
    </script>
</body>
</html>
